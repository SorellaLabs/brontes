[package]
name = "brontes"
version = "0.1.0"
edition = "2021"


# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
[dependencies]
# poirot
brontes-core.workspace = true
brontes-inspect.workspace = true
brontes-types.workspace = true
brontes-classifier.workspace = true
brontes-database.workspace = true
brontes-metrics.workspace = true
brontes-pricing.workspace = true
brontes-tracing.workspace = true
brontes-analytics.workspace = true
malachite.workspace = true
toml = "0.8.2"
indicatif.workspace = true

# Async
tokio = { workspace = true }
async-scoped = { version = "0.7.1", features = ["use-tokio"] }
futures.workspace = true

reqwest.workspace = true
# Reth
reth-tasks.workspace = true
reth-rpc.workspace = true
reth-rpc-api.workspace = true
reth-rpc-types.workspace = true
reth-provider.workspace = true
reth-transaction-pool.workspace = true
reth-network-api.workspace = true
reth-primitives.workspace = true
reth-db.workspace = true
reth-blockchain-tree.workspace = true
reth-beacon-consensus.workspace = true
#reth-revm.workspace = true
reth-interfaces.workspace = true

# Alloy
alloy-primitives.workspace = true
alloy-sol-macro = { workspace = true, features = ["json"] }
alloy-sol-types = { workspace = true, features = ["json"] }

alloy-provider.workspace = true
alloy-transport-http.workspace = true
alloy-transport.workspace = true
alloy-network.workspace = true
alloy-json-rpc.workspace = true
alloy-rpc-types.workspace = true
alloy-rpc-client.workspace = true

# tracing
tracing.workspace = true
tracing-subscriber.workspace = true
reth-tracing-ext.workspace = true
colored.workspace = true

# misc
eyre.workspace = true
dotenv.workspace = true
num_cpus.workspace = true
strum = { workspace = true, features = ["derive"] }
thiserror.workspace = true

# http/rpc
hyper.workspace = true

# cli
clap.workspace = true
# logging
indoc = "2"
rayon.workspace = true
cfg-if = "1.0.0"

# prometheus
metrics-process.workspace = true
itertools.workspace = true
fdlimit = "0.3.0"

polars = {features = ["lazy", "parquet", "group_by_list", "polars-io", "is_in"], workspace = true}

#[cfg(feature = "tui")]
crossterm = { version = "0.27.0", features = ["event-stream", "serde"] }
ratatui = { version = "0.26.1", features = ["all-widgets", "unstable-widget-ref"] }
palette = "0.7.3"
lazy_static = "1.4.0"
tui-textarea = "0.4.0"
tui-logger = {version = "0.11", features = ["tracing","tracing-support"]}
tracing-log = "0.2.0"
log = "0.4"
config = "0.14.0"
strip-ansi-escapes = "0.2.0"
json5 = "0.4.1"
libc = "0.2.148"
better-panic = "0.3.0"
signal-hook = "0.3.17"
serde = { version = "1.0.188", features = ["derive"] }
serde_json = "1.0.107"
color-eyre = "0.6.2"
derive_deref = "1.1.1"
tokio-util = "0.7.9"
tracing-error = "0.2.0"
directories = "5.0.1"
ansi-to-tui = "4.0.0"
throbber-widgets-tui= "0.5.0"
unicode-width = "0.1.11"
parking_lot = "0.12.1"
tokio-stream = "0.1.15"

[target.'cfg(not(target_env = "msvc"))'.dependencies]
jemallocator = "0.5.4"

[features]
default = [
  "brontes-core/default",
  "brontes-database/default",
  "brontes-classifier/default",
  "brontes-inspect/default",
  "pretty-print",
]

tui = [
  "brontes-inspect/tui",
]
sorella-server = ["local-reth", "local-clickhouse"]

cex-dex-markout = [
  "brontes-types/cex-dex-markout",
  "brontes-database/cex-dex-markout",
  "brontes-inspect/cex-dex-markout",
]

pretty-print = ["brontes-inspect/pretty-print"]

local-no-inserts = []

tests = [
  "brontes-core/tests",
  "brontes-database/tests",
  "brontes-classifier/tests",
  "brontes-inspect/tests",
  "brontes-pricing/tests",
]

local-reth = [
  "brontes-core/local-reth",
  "brontes-database/local-reth",
  "brontes-types/local-reth",
  "brontes-pricing/local-reth",
  "brontes-inspect/local-reth",
  "reth-tracing-ext/local-reth",
]

local-clickhouse = [
  "brontes-database/local-clickhouse",
  "brontes-core/local-clickhouse",
  "brontes-inspect/local-clickhouse",
  "brontes-classifier/local-clickhouse",
  "brontes-analytics/local-clickhouse",
  "brontes-types/local-clickhouse",
]

uni-v3-ticks = ["brontes-pricing/uni-v3-ticks"]
dyn-decode = ["brontes-core/dyn-decode"]
